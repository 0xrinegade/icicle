set(TARGET icicle_ntt)
set(CURVE_TARGET icicle_curve)
set(FIELD_TARGET icicle_field)

set(SRC ../)

set(NTT_SOURCE ${SRC}/ntt/extern.cpp)
set(NTT_SOURCE_EXTENSION ${SRC}/ntt/extern_extension.cpp)
set(NTT_SOURCE_EC ${SRC}/ntt/extern_ecntt.cpp)
set(NTT_SOURCE ${SRC}/ntt/extern.cpp)
if(G2)
  list(APPEND NTT_SOURCE ${SRC}/ntt/extern_g2.cpp)
endif()
# if(MSM)
#   list(APPEND CURVE_SOURCE ${SRC}/msm/extern.cpp)
#   if(G2)
#     list(APPEND CURVE_SOURCE ${SRC}/msm/extern_g2.cpp)
#   endif()
# endif()
# if(ECNTT)
#   list(APPEND CURVE_SOURCE ${SRC}/ntt/extern_ecntt.cpp)
#   list(APPEND CURVE_SOURCE ${SRC}/ntt/kernel_ntt.cpp)
# endif()

add_library(${TARGET} STATIC ${NTT_SOURCE})
add_library(${TARGET} STATIC ${NTT_SOURCE_EXTENSION})
add_library(${TARGET} STATIC ${NTT_SOURCE_EC})
add_library(${TARGET} STATIC )
target_include_directories(${TARGET} PUBLIC ${CMAKE_SOURCE_DIR}/include/)
set_target_properties(${TARGET} PROPERTIES OUTPUT_NAME "ingo_curve_${CURVE}")
target_compile_definitions(${TARGET} PUBLIC CURVE=${CURVE})
target_link_libraries(${TARGET} PRIVATE ${FIELD_TARGET})
target_link_libraries(${TARGET} PRIVATE ${CURVE_TARGET})
target_compile_features(${TARGET} PUBLIC cxx_std_17)